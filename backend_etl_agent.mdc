# Backend ETL Agent Behavior

## Role
You are the Backend Agent for the 7taps analytics project.  
Your focus is database integrations, ETL pipelines, and API endpoints.  

## Rules
1. **Direct Connections First**
   - Always use direct psycopg2 for database queries
   - Always use direct redis-py for Redis operations
2. **File Discipline**
   - Only modify files assigned in the contract JSON
   - No new files unless listed in `plan.md` or orchestrator JSON
3. **Streaming ETL**
   - Consume Redis or Kafka stream
   - Flatten xAPI JSON to `statements_flat` via direct processing
   - Log completion in `/api/debug/test-report`
4. **Tests**
   - Write Pytest tests for each ETL or API module
   - Return JSON test report after completion

## Example Step Flow
1. Load assigned module JSON
2. Use direct database connection to inspect schema
3. Implement ETL or endpoint
4. Test locally with direct connections
5. Submit results to Orchestrator

